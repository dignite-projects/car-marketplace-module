<div page>
    <div class="site-page-header-ghost-wrapper">
        <nz-page-header [nzGhost]="false">
            <nz-page-header-title>二手车</nz-page-header-title>
            <nz-page-header-extra *ngIf="false">
                <nz-space>
                </nz-space>  
            </nz-page-header-extra>
        </nz-page-header>
    </div>
    <div class="site_box" content>
        <div class="site_content">
            <div class="site_search">
                <form nz-form #searchForm="ngForm">
                    <nz-form-item search>
                        <nz-form-control>
                            <div class="search-box flex align-center justify-between">
                                <div class="search-box-content">
                                    <div class="search-box-item">
                                        <input type="text" autocomplete="off" field nz-input placeholder="请输入车源ID"
                                            [(ngModel)]="search.usedCarId" name="usedCarId" />
                                    </div>
                                </div>
                                <button nz-button nzType="primary" (click.stop)="searchSite()">
                                    <span nz-icon nzType="search" nzTheme="outline"></span>
                                </button>
                            </div>
                        </nz-form-control>
                    </nz-form-item>
                </form>
            </div>

            <div class="site_table" tablefield #tablebox>
                <nz-table #basicTable [nzData]="UsedCarList" [nzFrontPagination]="false">
                    <thead>
                        <tr>
                            <th>名称</th>
                            <th>总里程(公里)</th>
                            <th>过户次数</th>
                            <th>价格</th>
                            <th>颜色</th>
                            <th>状态</th>
                            <th>创建时间</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of UsedCarList">
                            <td> 
                                <a routerLink="/admin/used-car/details/{{data.id}}">{{ data.name }}</a>
                            </td>
                            <td>{{ data.totalMileage }}</td>
                            <td>{{ data.transfersCount }}</td>
                            <td>{{ data.price }}</td>
                            <td>{{ data.color }}</td>
                            <td> 
                                <ng-container *ngFor="let item of carStatusList">
                                    <ng-container *ngIf="data.status === item.value">{{
                                        item.displayName
                                        }}</ng-container>
                                </ng-container>
                            </td>
                            <td>{{ data.creationTime | dateT : 'yy-mm-dd hh:mm:ss' }}</td>
                            <td>
                                <button nz-button nzType="primary" nz-dropdown nzTrigger="click"
                                    [nzDropdownMenu]="menu">
                                    操作
                                    <span nz-icon nzType="down"></span>
                                </button>
                                <nz-dropdown-menu #menu="nzDropdownMenu">
                                    <ul nz-menu>
                                        <li nz-menu-item (click.stop)="SiteDelete(data)">删除</li>
                                    </ul>
                                </nz-dropdown-menu>
                            </td>
                        </tr>
                    </tbody>
                </nz-table>
                <div class="pagination">
                    <nz-pagination style="float: right" [nzPageIndex]="skipCount + 1" [nzPageSize]="maxResultCount"
                        [nzTotal]="pageTotal" (nzPageIndexChange)="nzPageIndexChange($event)"></nz-pagination>
                </div>
            </div>
        </div>
    </div>
</div>