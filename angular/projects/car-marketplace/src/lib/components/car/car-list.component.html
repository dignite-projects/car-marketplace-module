<div page>
    <div class="site-page-header-ghost-wrapper">
        <nz-page-header [nzGhost]="false">
            <nz-page-header-title>二手车</nz-page-header-title>
            <nz-page-header-extra>
                <nz-space>
                    <button *nzSpaceItem nz-button nzType="primary" routerLink="/car-marketplace/car/create"
                        [queryParams]="{}">新建</button>
                </nz-space>
            </nz-page-header-extra>
        </nz-page-header>
    </div>
    <div class="site_box" content>
        <div class="site_content">
            <div class="site_search">
                <form nz-form #searchForm="ngForm">
                    <nz-form-item search>
                        <nz-form-control>
                            <div class="search-box flex align-center justify-between">
                                <div class=" search-box-content">
                                    <div class="search-box-item">
                                        <input type="text" autocomplete="off" field nz-input placeholder="请输入名称"
                                            [(ngModel)]="search.filter" name="Filter">
                                    </div>
                                    <div class="search-box-item">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="选择二手车状态"
                                            [(ngModel)]="search.status" name="status">
                                            <ng-container *ngFor="let item of carStatusList">
                                                <nz-option [nzLabel]="item.displayName"
                                                    [nzValue]="item.value"></nz-option>
                                            </ng-container>
                                        </nz-select>
                                    </div>
                                    <!-- <div class="search-box-item">
                                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="请选择品牌" [(ngModel)]="brandID"
                                            name="brandID" (ngModelChange)="BrandChange($event)">
                                            <ng-container *ngFor="let item of brandList">
                                                <nz-option [nzLabel]="item.name" [nzValue]="item.id"
                                                    *ngIf="item.name && item.id">{{
                                                    item.name
                                                    }}</nz-option>
                                            </ng-container>
                                        </nz-select>
                                    </div>
                                    <div class="search-box-item">
                                        <nz-select nzShowSearch nzAllowClear
                                            [nzPlaceHolder]="brandID ? '请选择车型' : '请先选择品牌'"
                                            (ngModelChange)="ModelChange($event)" [(ngModel)]="modelID" name="modelID">
                                            <ng-container *ngFor="let item of modelList">
                                                <nz-option [nzLabel]="item.name" [nzValue]="item.id"
                                                    *ngIf="item.name && item.id">{{
                                                    item.name
                                                    }}</nz-option>
                                            </ng-container>
                                        </nz-select>
                                    </div> -->
                                    <!-- <div class="search-box-item">
                                        <nz-select nzShowSearch nzAllowClear
                                            [nzPlaceHolder]="modelID ? '请选择车款' : '请先选择车型'" [(ngModel)]="search.trimId"
                                            name="trimId">
                                            <ng-container *ngFor="let item of trimList">
                                                <nz-option [nzLabel]="item.name" [nzValue]="item.id"
                                                    *ngIf="item.name && item.id">{{
                                                    item.name
                                                    }}</nz-option>
                                            </ng-container>
                                        </nz-select>
                                    </div> -->
                                </div>
                                <button nz-button nzType="primary" (click.stop)="searchSite()"><span nz-icon
                                        nzType="search" nzTheme="outline"></span></button>
                            </div>
                        </nz-form-control>
                    </nz-form-item>

                </form>
            </div>

            <div class="site_table" tablefield #tablebox>
                <nz-table #basicTable [nzData]="UsedCarList" [nzFrontPagination]="false">
                    <thead>
                        <tr>
                            <th>名称</th>
                            <th>品牌</th>
                            <th>车型</th>
                            <th>车款</th>
                            <!-- <th>modelLevel</th>
                            <th>powerType</th>
                            <th>transmissionType</th> -->
                            <th>总公里(万)</th>
                            <th>过户次数</th>
                            <th>价格</th>
                            <th>颜色</th>
                            <th>状态</th>
                            <th>创建时间</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of UsedCarList">
                            <td><a routerLink="/car-marketplace/car/details" [queryParams]="{usedCarId:data.id}">{{
                                    data.name }}</a></td>
                            <td>{{ data.brand?.name}}</td>
                            <td>{{ data.model?.name }}</td>
                            <td>{{ data.trim?.name }}</td>
                            <!-- <td>{{ data.modelLevel }}</td>
                            <td>{{ data.powerType }}</td>
                            <td>{{ data.transmissionType }}</td> -->
                            <td>{{ data.totalMileage }}</td>
                            <td>{{ data.transfersCount }}</td>
                            <td>{{ data.price }}</td>
                            <td>{{ data.color }}</td>

                            <td>
                                <ng-container *ngFor="let item of carStatusList">
                                    <ng-container *ngIf=" data.status===item.value">{{
                                        item.displayName}}</ng-container>
                                </ng-container>
                            </td>
                            <td>{{ data.creationTime|dateT:'yy-mm-dd hh:mm:ss' }}</td>
                            <td>
                                <button nz-button nzType="primary" nz-dropdown nzTrigger="click"
                                    [nzDropdownMenu]="menu">
                                    操作
                                    <span nz-icon nzType="down"></span>
                                </button>
                                <nz-dropdown-menu #menu="nzDropdownMenu">
                                    <ul nz-menu>
                                        <li nz-menu-item (click.stop)="EditUsedCar(data)">编辑</li>
                                        <li nz-menu-item (click.stop)="SiteDelete(data)">删除</li>
                                    </ul>
                                </nz-dropdown-menu>
                            </td>
                        </tr>
                    </tbody>
                </nz-table>
                <div class="pagination">
                    <nz-pagination style="float: right;" [nzPageIndex]="skipCount+1" [nzPageSize]="maxResultCount"
                        [nzTotal]="pageTotal" (nzPageIndexChange)="nzPageIndexChange($event)"></nz-pagination>
                    <!-- <nz-pagination [nzPageIndex]="3" [nzTotal]="50"></nz-pagination> -->
                </div>

            </div>
        </div>
    </div>







</div>